
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>å°å¾„åˆ†å²”çš„èŠ±å›­</title>
  <meta name="author" content="khotyn">

  
  <meta name="description" content="">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://khotyn.github.com/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <style type="text/css">
    body {
      padding-bottom: 40px;
    }
    h1 {
      margin-bottom: 15px;
    }
    img {
      max-width: 100%;
    }
    .sharing, .meta, .pager {
      margin: 20px 0px 20px 0px;
    }
    .page-footer p {
      text-align: center;
    }
  </style>
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="å°å¾„åˆ†å²”çš„èŠ±å›­" type="application/atom+xml">
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44033767-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><div class="navbar navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">å°å¾„åˆ†å²”çš„èŠ±å›­</a>

      <div class="nav-collapse">
        <ul class="nav">
  <li><a href="/blog/archives">ğŸ—‚å½’æ¡£</a></li>
  <li><a href="/about">ğŸ‘¨å…³äº</a></li>
  <li><a href="/hire">ğŸ‘¨â€ğŸ’»æ‹›è˜</a></li>
  <li><a href="https://github.com/khotyn" target="_blank">æˆ‘çš„ Github</a></li>
</ul>

        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="https://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:blog.khotyn.com" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
  
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2014/08/16/guice-collection-inject/">Guice é›†åˆæ³¨å…¥</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-16T18:47:00-05:00" pubdate data-updated="true">Aug 16<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/16/guice-collection-inject/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Guice çš„åˆå­¦è€…åœ¨ä½¿ç”¨ Guice å¾€ä¸€ä¸ªç±»ä¸­æ³¨å…¥ä¸€ä¸ªé›†åˆæ³¨å…¥çš„æ—¶å€™ï¼Œè‚¯å®šæœ‰æ„Ÿè§‰åˆ°éå¸¸åœ°ä¸è‡ªç„¶ï¼ˆè¿™é‡Œçš„ä¸è‡ªç„¶æˆ‘è§‰å¾—ä¸€å®šç¨‹åº¦ä¸Šæ˜¯ä¸ç¬¦åˆ Guice ç»™äººçš„åˆå°è±¡ï¼‰ï¼Œç”±äºæœ€è¿‘åœ¨é¡¹ç›®ä¸­ä¹Ÿåœ¨ä½¿ç”¨ Guiceï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå¯¹ Guice çš„é›†åˆæ³¨å…¥åšä¸€ä¸ªè®°å½•ã€‚</p>

<h4 id="guice--guice-multibindings">ä¸€ã€ä½¿ç”¨ Guice çš„æ‰©å±• guice-multibindings</h4>

<p>Guice çš„æ–‡æ¡£ä¸Šå…³äº Guice æ³¨å…¥çš„æœ€ç®€å•çš„ä¾‹å­åº”è¯¥å°±æ˜¯ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">bind</span><span class="o">(</span><span class="n">Interface</span><span class="o">.</span><span class="na">java</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">Implementation</span><span class="o">.</span><span class="na">java</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>æˆ‘ä»¬å¸Œæœ›åœ¨ä½¿ç”¨ Guice åšé›†åˆæ³¨å…¥çš„æ—¶å€™è‚¯å®šä¹Ÿæ˜¯å¸Œæœ›ä½¿ç”¨ç±»ä¼¼çš„ API åšæ³¨å…¥ï¼Œä¸è¿‡å¯æƒœçš„æ˜¯ï¼ŒGuice çš„æ ¸å¿ƒé‡Œé¢å¹¶æ²¡æœ‰æä¾›ç±»ä¼¼çš„ API è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¥æ³¨å…¥é›†åˆã€‚</p>

<p>æ‰€å¹¸çš„æ˜¯ï¼ŒGuice æä¾›äº†ä¸€ä¸ªæ‰©å±•çš„åŒ… <code>guice-multibindings</code> ä½¿ç”¨å’Œ Guice æœ€åŸå§‹çš„ API ç±»ä¼¼çš„æ–¹å¼æ¥åšæ³¨å…¥ã€‚</p>

<p>éœ€è¦ä½¿ç”¨è¿™ä¸ªæ‰©å±•çš„åŒ…ï¼Œä½¿ç”¨ Maven çš„è¯ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­åŠ å…¥å¦‚ä¸‹çš„ä¾èµ–ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
</span><span class="line">    <span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">inject</span><span class="o">.</span><span class="na">extensions</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
</span><span class="line">    <span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">guice</span><span class="o">-</span><span class="n">multibindings</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
</span><span class="line">    <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">3.0</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
</span><span class="line"><span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><code>guice-multibindings</code> ä¸»è¦ä½¿ç”¨äº†ä¸¤ç§æ–¹å¼æ¥æ³¨å…¥ï¼Œä¸€ç§æ˜¯æ³¨å…¥ä¸€ä¸ª Setï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">Multibinder</span><span class="o">&lt;</span><span class="n">CheckHandler</span><span class="o">&gt;</span> <span class="n">checkAdapter</span> <span class="o">=</span> <span class="n">Multibinder</span><span class="o">.</span><span class="na">newSetBinder</span><span class="o">(</span><span class="n">binder</span><span class="o">(),</span> <span class="n">CheckHandler</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class="line"><span class="n">checkAdapter</span><span class="o">.</span><span class="na">addBinding</span><span class="o">().</span><span class="na">to</span><span class="o">(</span><span class="n">InstalledCheckHandler</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>checkAdapter</code>ï¼Œç„¶åå¾€è¿™ä¸ª Multibinder ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä»»æ„å¤šçš„ <code>CheckHandler</code> çš„å®ç°ã€‚</p>

<p>å¦ä¸€ç§æ–¹å¼æ˜¯æ³¨å…¥ä¸€ä¸ª Mapï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">MapBinder</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">CheckHandler</span><span class="o">&gt;</span> <span class="n">mapBinder</span> <span class="o">=</span> <span class="n">MapBinder</span><span class="o">.</span><span class="na">newMapBinder</span><span class="o">(</span><span class="n">binder</span><span class="o">(),</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">CheckHandler</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class="line"><span class="n">mapBinder</span><span class="o">.</span><span class="na">addBinding</span><span class="o">(</span><span class="s">&quot;Hello&quot;</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">InstalledCheckHandler</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Map çš„æ³¨å…¥æ–¹å¼å’Œ Set çš„æ³¨å…¥æ–¹å¼éå¸¸ç±»ä¼¼ã€‚ä¸è¿‡å¥‡æ€ªçš„ä¸€ç‚¹æ˜¯ï¼ŒGuice å¹¶æ²¡æœ‰æä¾›æ³¨å…¥ List çš„æ–¹æ³•ï¼Œ<strong>è¿™æ˜¯å€¼å¾—æ€è€ƒçš„ä¸€ç‚¹</strong>ã€‚</p>

<h4 id="provides-">äºŒã€ä½¿ç”¨ <code>@Provides</code> æ¥æ³¨å…¥</h4>

<p>çœ‹äº†ç¬¬ä¸€ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„è¿™ç§æ–¹æ³•å¹¶ä¸èƒ½æ³¨å…¥ä¸€ä¸ª Listï¼Œä¸è¿‡ï¼Œæˆ‘ä»¬è¿˜æ˜¯æœ‰åŠæ³•æ¥æ³¨å…¥ä¸€ä¸ª List çš„ï¼Œå°±æ˜¯ä½¿ç”¨ä¸€ä¸ª <code>@Provides</code> æ³¨è§£ï¼Œæ¯”å¦‚åœ¨æˆ‘ä»¬çš„ Guice Module çš„ç±»é‡Œé¢åŠ å…¥ä¸€ä¸‹çš„ä»£ç ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="nd">@Provides</span>
</span><span class="line"><span class="n">List</span><span class="o">&lt;</span><span class="n">BindingAdapter</span><span class="o">&gt;</span> <span class="nf">provideBindingAdapter</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">    <span class="n">List</span><span class="o">&lt;</span><span class="n">BindingAdapter</span><span class="o">&gt;</span> <span class="n">bindingAdapters</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BindingAdapter</span><span class="o">&gt;();</span>
</span><span class="line">    <span class="n">List</span><span class="o">&lt;</span><span class="n">OsgiServiceHolder</span><span class="o">&lt;</span><span class="n">BindingAdapter</span><span class="o">&gt;&gt;</span> <span class="n">bindingAdapterHolders</span> <span class="o">=</span> <span class="n">OsgiFrameworkUtils</span>
</span><span class="line">        <span class="o">.</span><span class="na">getServices</span><span class="o">(</span><span class="n">bundleContext</span><span class="o">,</span> <span class="n">BindingAdapter</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class="line">
</span><span class="line">    <span class="k">for</span> <span class="o">(</span><span class="n">OsgiServiceHolder</span><span class="o">&lt;</span><span class="n">BindingAdapter</span><span class="o">&gt;</span> <span class="n">bindingAdapterHolder</span> <span class="o">:</span> <span class="n">bindingAdapterHolders</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">        <span class="kd">final</span> <span class="n">BindingAdapter</span> <span class="n">bindingAdapter</span> <span class="o">=</span> <span class="n">bindingAdapterHolder</span><span class="o">.</span><span class="na">getService</span><span class="o">();</span>
</span><span class="line">
</span><span class="line">        <span class="k">if</span> <span class="o">(</span><span class="n">bindingAdapter</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">            <span class="n">bindingAdapters</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bindingAdapter</span><span class="o">);</span>
</span><span class="line">        <span class="o">}</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="n">bindingAdapters</span><span class="o">;</span>
</span><span class="line">
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»å…¶ä»–çš„åœ°æ–¹æ‹¿åˆ°å¯¹åº”çš„ç±»çš„å®ä¾‹ï¼Œç„¶åæ”¾åˆ°ä¸€ä¸ª List ä¸­ï¼Œé€šè¿‡ Guice æ³¨å…¥ç»™å…¶ä»–çš„ç±»äº†ã€‚</p>

<p>ä¸Šé¢çš„è¿™ä¸¤ç§æ–¹å¼å…¶å®å„æœ‰ä¼˜åŠ£ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘è§‰å¾—é€‰æ‹©ç¬¬ä¸€ç§å°±å¯ä»¥äº†ï¼Œæ¯•ç«Ÿï¼Œç¬¬ä¸€ç§æ–¹æ³•çš„ç±»çš„å®ä¾‹æ˜¯ç”± Guice æ¥ç”Ÿæˆçš„ã€‚é€‰æ‹©ç¬¬äºŒç§æ–¹å¼çš„åœºæ™¯æˆ‘è§‰å¾—å¯èƒ½æœ‰ï¼š</p>

<ul>
  <li>ç±»çš„å®ä¾‹æ˜¯ä»å…¶ä»–çš„åœ°æ–¹æ¥çš„ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ˜¯ä» OSGi æ¥çš„ã€‚</li>
  <li>ç®€å•ç±»å‹çš„ç±»ï¼Œæ¯”å¦‚ä¸€ä¸ª String çš„ Listã€‚</li>
</ul>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2014/08/14/use-junit-rule-to-assert-log4j-output/">åˆ©ç”¨ JUnit çš„ Rule å¯¹ Log4j çš„è¾“å‡ºè¿›è¡Œæµ‹è¯•</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-14T22:07:00-05:00" pubdate data-updated="true">Aug 14<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/14/use-junit-rule-to-assert-log4j-output/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>æœ€è¿‘åœ¨å†™æ¡†æ¶çš„æµ‹è¯•ä»£ç çš„æ—¶å€™ï¼Œæœ‰éœ€æ±‚è¦å¯¹ Log4j çš„è¾“å‡ºè¿›è¡Œæµ‹è¯•ï¼ˆ<strong>ä¾èµ– Log4j çš„è¾“å‡ºæ¥è¿›è¡Œæµ‹è¯•ï¼Œè¿™ä¸€ç‚¹æœ¬èº«å¯èƒ½å¾—æ·±æ€ä¸€ä¸‹</strong>ï¼‰ï¼Œä¹‹å‰ä¹Ÿæœ‰å¯¹ stdout å’Œ stderr è¿›è¡Œæµ‹è¯•ï¼Œç”¨äº†ä¸€ä¸ªå«åš <code>system-rule</code> çš„åŒ…ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="xml"><span class="line"><span class="nt">&lt;dependency&gt;</span>
</span><span class="line">    <span class="nt">&lt;groupId&gt;</span>com.github.stefanbirkner<span class="nt">&lt;/groupId&gt;</span>
</span><span class="line">    <span class="nt">&lt;artifactId&gt;</span>system-rules<span class="nt">&lt;/artifactId&gt;</span>
</span><span class="line">    <span class="nt">&lt;version&gt;</span>1.5.0<span class="nt">&lt;/version&gt;</span>
</span><span class="line"><span class="nt">&lt;/dependency&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>åˆ©ç”¨è¿™ä¸ªåŒ…ä¸­ç±»ï¼Œåªéœ€è¦åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­åŠ ä¸Šä¸€ä¸ª JUnit Ruleï¼Œå°±å¯ä»¥è·å–åˆ° stdout å’Œ stderr ä¸­çš„å†…å®¹ï¼Œç„¶åå¯¹å…¶è¿›è¡Œæµ‹è¯•ã€‚ç°åœ¨æˆ‘ä¹Ÿæƒ³å¯¹ Log4j çš„è¾“å‡ºé‡‡ç”¨ç±»ä¼¼çš„æ–¹å¼è¿›è¡Œæµ‹è¯•ï¼Œäºæ˜¯æ‰©å±•äº† JUnit çš„ Ruleï¼Œå°±æœ‰äº†ä»¥ä¸‹è¿™ä¸€æ®µä»£ç ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="cm">/**</span>
</span><span class="line"><span class="cm"> * æ­¤ Rule ç”¨äºå¯¹ Log4j è¿›è¡Œæµ‹è¯•</span>
</span><span class="line"><span class="cm"> *</span>
</span><span class="line"><span class="cm"> * @author khotyn 8/14/14 9:18 PM</span>
</span><span class="line"><span class="cm"> */</span>
</span><span class="line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Log4jRule</span> <span class="kd">extends</span> <span class="n">ExternalResource</span> <span class="o">{</span>
</span><span class="line">    <span class="kd">private</span> <span class="n">String</span>       <span class="n">logName</span><span class="o">;</span>
</span><span class="line">    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">loggerMessages</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
</span><span class="line">
</span><span class="line">    <span class="kd">public</span> <span class="nf">Log4jRule</span><span class="o">(</span><span class="n">String</span> <span class="n">loggerName</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">        <span class="k">this</span><span class="o">.</span><span class="na">logName</span> <span class="o">=</span> <span class="n">loggerName</span><span class="o">;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="kd">public</span> <span class="nf">Log4jRule</span><span class="o">(</span><span class="n">Class</span> <span class="n">className</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">        <span class="k">this</span><span class="o">.</span><span class="na">logName</span> <span class="o">=</span> <span class="n">className</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getLoggerMessages</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">        <span class="k">return</span> <span class="n">loggerMessages</span><span class="o">;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getLogMessageAsString</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">        <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
</span><span class="line">
</span><span class="line">        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">loggerMessage</span> <span class="o">:</span> <span class="n">loggerMessages</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">            <span class="n">result</span> <span class="o">+=</span> <span class="n">loggerMessage</span><span class="o">;</span>
</span><span class="line">            <span class="n">result</span> <span class="o">+=</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
</span><span class="line">        <span class="o">}</span>
</span><span class="line">
</span><span class="line">        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="nd">@Override</span>
</span><span class="line">    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
</span><span class="line">        <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">LogManager</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">logName</span><span class="o">);</span>
</span><span class="line">        <span class="n">logger</span><span class="o">.</span><span class="na">addAppender</span><span class="o">(</span><span class="k">new</span> <span class="n">AppenderSkeleton</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">            <span class="nd">@Override</span>
</span><span class="line">            <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">append</span><span class="o">(</span><span class="n">LoggingEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">                <span class="n">loggerMessages</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">getMessage</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
</span><span class="line">            <span class="o">}</span>
</span><span class="line">
</span><span class="line">            <span class="nd">@Override</span>
</span><span class="line">            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">
</span><span class="line">            <span class="o">}</span>
</span><span class="line">
</span><span class="line">            <span class="nd">@Override</span>
</span><span class="line">            <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">requiresLayout</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
</span><span class="line">            <span class="o">}</span>
</span><span class="line">        <span class="o">});</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>æ•´æ®µä»£ç éå¸¸ç®€å•ï¼Œç»§æ‰¿äº† JUnit çš„ <code>ExternalResource</code> ç±»ï¼Œç„¶ååœ¨ <code>before</code> æ–¹æ³•ä¸­ï¼Œç»™å¯¹åº”çš„ Logger åŠ ä¸Šäº†ä¸€ä¸ª Appenderï¼Œåœ¨ Appender ä¸­ï¼Œå°†æ—¥å¿—å†…å®¹æ”¶é›†åˆ°ä¸€ä¸ª List ä¸­ï¼Œç„¶åæ‹¿åˆ°è¿™ä¸ª List å°±å¯ä»¥æ‹¿åˆ°æ—¥å¿—çš„è¾“å‡ºäº†ã€‚</p>

<p>ä½¿ç”¨çš„æ—¶å€™éå¸¸ç®€å•ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleTest</span> <span class="o">{</span>
</span><span class="line">    <span class="nd">@Rule</span>
</span><span class="line">    <span class="kd">public</span> <span class="n">Log4jRule</span> <span class="n">log4jRule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Log4jRule</span><span class="o">(</span><span class="n">SampleTest</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class="line">
</span><span class="line">    <span class="nd">@Test</span>
</span><span class="line">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">      	<span class="c1">// .........</span>
</span><span class="line">        <span class="n">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">log4jRule</span><span class="o">.</span><span class="na">getLogMessageAsString</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span>
</span><span class="line">            <span class="s">&quot;Hello, world&quot;</span><span class="o">));</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>é€šè¿‡ </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">log4jRule</span><span class="o">.</span><span class="na">getLogMessageAsString</span><span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>å¯ä»¥æ‹¿åˆ°ä¸€ä¸ª String æ ¼å¼çš„æ—¥å¿—è¾“å‡ºï¼Œæˆ–è€…é€šè¿‡ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">log4jRule</span><span class="o">.</span><span class="na">getLoggerMessages</span><span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>æ¥è·å¾—ä¸€ä¸ªæ—¥å¿—è¾“å‡ºçš„å†…å®¹çš„ Listï¼ŒList ä¸­çš„æ²¡ä¸€è¡Œå°±æ˜¯æ—¥å¿—ä¸­çš„ä¸€è¡Œ</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2014/03/31/unittest/">ä¸€äº›å…³äºå•å…ƒæµ‹è¯•çš„æ€è€ƒ</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-31T09:06:00-05:00" pubdate data-updated="true">Mar 31<span>st</span>, 2014</time>
        
         | <a href="/blog/2014/03/31/unittest/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>æœ€è¿‘åœ¨å¼€å‘å…¬å¸çš„é›†æˆæµ‹è¯•æ¡†æ¶ï¼Œæœ‰ä¸€äº›å…³äºå•å…ƒæµ‹è¯•çš„ä½“ä¼šï¼Œå†™ä¸€ä¸ªåšå®¢è®°å½•ä¸€ä¸‹æƒ³æ³•ã€‚</p>

<h4 id="section">ä¸ºä»€ä¹ˆè¦å†™å•å…ƒæµ‹è¯•ï¼Ÿ</h4>

<p>è¿™ä¸ªé—®é¢˜ï¼Œå·²ç»æœ‰æ— æ•°çš„å…³äºæŠ€æœ¯çš„ä¹¦ã€æ–‡ç« å»é˜è¿°äº†ï¼Œä¸æ–­åœ°å¼ºè°ƒå•å…ƒæµ‹è¯•çš„é‡è¦æ€§ã€‚æ¯”å¦‚å•å…ƒæµ‹è¯•å¯ä»¥è®©ä½ åœ¨è½¯ä»¶å¼€å‘çš„æ—©æœŸé˜¶æ®µå‘ç° Bugï¼Œè€Œä¸å¿…åˆ°é›†æˆæµ‹è¯•çš„æ—¶å€™æ‰å‘ç°ç­‰ç­‰ã€‚ä¸è¿‡ï¼Œå¯¹äºæˆ‘æ¥è¯´ï¼Œåœ¨åˆ‡å®åœ°æˆ³åˆ°æˆ‘çš„ç—›ç‚¹ä¹‹å‰ï¼Œæˆ‘ä¸€ç›´éƒ½æ²¡æœ‰å»é‡è§†è¿™äº›å…³äºå•å…ƒæµ‹è¯•çš„å¿ å‘Šï¼ˆè™½ç„¶åœ¨å¿ƒä¸­è®°ç€ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶ä¸æ˜¯å¾ˆåœ¨æ„ï¼‰ã€‚</p>

<p>åœ¨å†™å…¬å¸çš„é›†æˆæµ‹è¯•æ¡†æ¶çš„æ—¶å€™ï¼Œæœ‰é‚£ä¹ˆå¥½å‡ æ¬¡ï¼Œåœ¨è°ƒæ•´äº†ç°æœ‰çš„åŠŸèƒ½ï¼Œæˆ–è€…ä¿®å¤äº†æŸä¸ª Bug ä¹‹åï¼Œ<strong>å› ä¸ºæ‡’æƒ°ï¼Œä¹Ÿå› ä¸ºè·‘ä¸€æ¬¡å®Œæ•´çš„å•å…ƒæµ‹è¯•æ‰€éœ€è¦çš„è€—æ—¶è¾ƒé•¿</strong>ï¼Œæˆ‘ä¾¥å¹¸åœ°è®¤ä¸ºè¿™äº›ä¿®æ”¹åº”è¯¥æ²¡æœ‰é—®é¢˜ï¼Œç›´æ¥æ‰“åŒ…äº¤ä»˜ã€‚ç»“æœæ˜¯ï¼Œå¢¨è²å®šå¾‹å‡ºç°äº†ï¼Œæœç„¶ï¼Œæ²¡æœ‰ç»è¿‡æµ‹è¯•çš„ä¿®æ”¹å¼•å‘äº†æ–°çš„ Bugï¼Œæˆ‘ä¸å¾—ä¸é‡æ–°ä¿®æ”¹ä»£ç ï¼Œç„¶ååšç€è„¸çš®è®©ç”¨æˆ·é‡æ–°è¯•ä¸€æ¬¡ã€‚</p>

<p>äººæ€»æ˜¯ä¸é è°±çš„ï¼Œæˆ‘ä»¬æ‡’æƒ°ï¼Œæˆ‘ä»¬å­˜åœ¨ä¾¥å¹¸å¿ƒç†ï¼Œåäº‹å„¿æ€»æ˜¯åœ¨æˆ‘ä»¬æœ€ä¸å¸Œæœ›å‘ç”Ÿçš„æ—¶å€™å‘ç”Ÿã€‚å†™å•å…ƒæµ‹è¯•ä¸èƒ½é˜²æ­¢æˆ‘ä»¬æ‡’æƒ°ï¼Œé˜²æ­¢æˆ‘ä»¬å­˜åœ¨ä¾¥å¹¸å¿ƒç†ã€‚ä½†æ˜¯ä¸€æ¬¡æˆæœ¬ä½å»‰çš„å•å…ƒæµ‹è¯•ä¼šè®©æˆ‘ä»¬è§‰å¾—ï¼šâ€œåæ­£è¿è¡Œä¸€æ¬¡ä½†å•å…ƒæµ‹è¯•ä¸ä¼šè€—è´¹å¾ˆå¤šæ—¶é—´ï¼Œä¸å¦‚è·‘ä¸€æ¬¡å§â€ï¼Œå®ƒåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½æˆ‘ä»¬çŠ¯é”™çš„å‡ ç‡ã€‚</p>

<p>å•å…ƒæµ‹è¯•å¯¹äºé‡æ„çš„æ„ä¹‰ä¹Ÿéå¸¸é‡å¤§ã€‚å¾ˆå¤šæœ‰æ„æ€çš„ç¨‹åºå‘˜éƒ½æœ‰æ´ç™–ï¼Œä¼šæƒ³ç€å»ä¿®æ”¹æŸä¸€æ®µã€Œæ¶å¿ƒã€çš„ä»£ç ã€‚æˆ‘æœ‰è¿‡è¿™æ ·å‡ æ¬¡ç»å†ï¼Œåœ¨æŠŠä¸€æ®µã€Œæ¶å¿ƒã€çš„ä»£ç ä¿®æ”¹åœ°èµå¿ƒæ‚¦ç›®åï¼Œæœ€åä¸Šçº¿åå‘ç°å¼•å…¥äº†ä¸€ä¸ª Bugï¼Œå¿ƒé‡Œæš—éª‚ä¸€å¥ WTFï¼Œç„¶åä¸€è„¸é»‘çº¿åœ°æŠŠ Bug ä¿®æ”¹äº†ï¼Œæƒ³æƒ³å¦‚æœå½“æ—¶æœ‰å•å…ƒæµ‹è¯•ï¼Œé‚£ä¹ˆä¼šç»™æˆ‘å¤šå¤§çš„å‹‡æ°”ï¼Œè®©æˆ‘å¯ä»¥è‚†æ— å¿Œæƒ®åœ°å»é‡æ„ä»£ç ï¼Œè¿™æ˜¯å¤šä¹ˆçˆ½çš„ä¸€ä»¶äº‹æƒ…ã€‚</p>

<h4 id="section-1">å¥½çš„å•å…ƒæµ‹è¯•åº”è¯¥æ˜¯æ€æ ·çš„ï¼Ÿ</h4>

<p>ä¸€ä¸ªå¥½çš„å•å…ƒæµ‹è¯•ï¼Œæˆ‘è§‰å¾—æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯è¿è¡Œæˆæœ¬å¾—ä½ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå•å…ƒæµ‹è¯•è¶Šå¿«è¶Šå¥½ã€‚è¿è¡Œä¸€æ¬¡å•å…ƒæµ‹è¯•çš„æˆæœ¬è¶Šä½ï¼Œä½ æ‰ä¼šè¶Šæ„¿æ„å»è¿è¡Œå•å…ƒæµ‹è¯•ã€‚å¦‚æœè¿è¡Œä¸€æ¬¡å•å…ƒæµ‹è¯•å¾— 10 åˆ†é’Ÿ 20 åˆ†é’Ÿï¼Œé‚£ä¹ˆæˆ‘æƒ³å¾ˆå¤šäººçš„ä¾¥å¹¸å¿ƒç†åˆä¼šå‡ºæ¥äº†ã€‚</p>

<h4 id="section-2">æˆ‘æ˜¯æ€æ ·å†™å•å…ƒæµ‹è¯•çš„ï¼Ÿ</h4>

<p>æˆ‘ä¸€èˆ¬æ˜¯è¿™æ ·å†™å•å…ƒæµ‹è¯•çš„ï¼Œå…ˆæƒ³æ¸…æ¥šæ¨¡å—çš„è¾¹ç•Œï¼Œæœ‰å“ªå‡ ç§å¯èƒ½çš„è¾“å…¥ï¼Œè¿™äº›è¾“å…¥å¯¹åº”çš„å¯èƒ½è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Œç„¶åä»¥æœ€å¿«çš„é€Ÿåº¦å †ç§¯ä»£ç æŠŠåŠŸèƒ½å…ˆå®ç°å‡ºæ¥ï¼Œæ¥ç€å†™å•å…ƒæµ‹è¯•ï¼ŒæŠŠæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨è·‘è¿‡ã€‚æ¥ä¸‹æ¥é©¬ä¸Šç€æ‰‹é‡æ„ä¹‹å‰å†™çš„ä»£ç ï¼Œä¸æ–­é‡æ„ï¼Œä¸æ–­åœ°è·‘å•å…ƒæµ‹è¯•ï¼ŒçŸ¥é“é‡æ„åçš„ä»£ç è®©è‡ªå·±æ»¡æ„ä¸ºæ­¢ã€‚</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2014/01/21/turnoff-tomcat-tld-scan/">å…³é—­ Tomcat çš„ TLD æ‰«æçš„åŠŸèƒ½</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-21T19:12:00-06:00" pubdate data-updated="true">Jan 21<span>st</span>, 2014</time>
        
         | <a href="/blog/2014/01/21/turnoff-tomcat-tld-scan/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3 id="section">èƒŒæ™¯</h3>

<p>Tomcat ä½œä¸º Servlet è§„èŒƒçš„å®ç°è€…ï¼Œå®ƒåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™ä¼šæ‰«æ Jar åŒ…é‡Œé¢çš„ .tld æ–‡ä»¶ï¼ŒåŠ è½½é‡Œé¢å®šä¹‰çš„æ ‡ç­¾åº“ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™å¾ˆå¤šéƒ½ä¸æ˜¯é‡‡ç”¨ JSP ä½œä¸º Web é¡µé¢çš„æ¨¡æ¿çš„ï¼Œå¾ˆå¤šéƒ½æ˜¯ä½¿ç”¨  Velocity ä¹‹ç±»çš„æ¨¡æ¿å¼•æ“ï¼Œè‡ªç„¶è€Œç„¶ï¼Œä¸ºäº†åŠ å¿«åº”ç”¨çš„å¯åŠ¨é€Ÿåº¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Tomcat é‡Œé¢çš„è¿™ä¸ªåŠŸèƒ½ç»™å…³æ‰ã€‚</p>

<h3 id="section-1">æ–¹æ³•</h3>

<p>çœ‹ Tomcat çš„é…ç½®æ–‡æ¡£ï¼Œå…³äº Context çš„è®¾ç½®è¿™ä¸€å—ï¼Œçœ‹åˆ°äº† <code>processTlds</code> è¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®ï¼Œçœ‹ä¸‹è¿™ä¸ªå±æ€§çš„è¯´æ˜ï¼š</p>

<blockquote>
  <p>Whether the context should process TLDs on startup. The default is true. The false setting is intended for special cases that know in advance TLDs are not part of the webapp.</p>
</blockquote>

<p>åªè¦åœ¨ Context ä¸­æŠŠè¿™ä¸ªå±æ€§è®¾ç½®æˆ falseï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å…³é—­ Tomcat çš„ TLD æ‰«æåŠŸèƒ½äº†ï¼Œä¸ºäº†è®©æ‰€æœ‰çš„åº”ç”¨éƒ½å¯ä»¥å…³é—­è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å°† Tomcat ç›®å½•ä¸‹çš„ conf/context.xml ä¿®æ”¹æˆå¦‚ä¸‹è¿™æ ·ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class=""><span class="line">&lt;?xml version='1.0' encoding='utf-8'?&gt;
</span><span class="line">&lt;Context processTlds="false"&gt;
</span><span class="line">    &lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;
</span><span class="line">&lt;/Context&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="section-2">å‘</h4>

<p>ä½†æ˜¯ï¼Œåœ¨ Tomcat 6 ä¸­æµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°è¿™ä¸ªåŠŸèƒ½æ²¡æœ‰ç”Ÿæ•ˆï¼Œæ— å¥ˆåªèƒ½ Debug Tomcat çš„æºç ï¼Œå‘ç° StandardContext çš„ init æ–¹æ³•ä¸‹æœ‰å¦‚ä¸‹ä»£ç ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class=""><span class="line">if (processTlds) {
</span><span class="line">    this.addLifecycleListener(new TldConfig());
</span><span class="line">}
</span><span class="line">
</span><span class="line">super.init();
</span><span class="line">
</span><span class="line">// Notify our interested LifecycleListeners
</span><span class="line">lifecycle.fireLifecycleEvent(INIT_EVENT, null);</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>è¿™é‡Œéœ€è¦è¯´æ˜çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬çš„é»˜è®¤çš„ context é…ç½®æ˜¯åœ¨ <code>lifecycle.fireLifecycleEvent(INIT_EVENT, null);</code> è¿™è¡Œä»£ç ä¸­è¢«å¤„ç†çš„ï¼Œè€Œåœ¨è¿™è¡Œä»£ç ä¹‹å‰ï¼ŒTomcat å°±å·²ç»ä½¿ç”¨äº† <code>processTlds</code>ï¼Œæˆ‘ä»¬çš„é…ç½®å®Œå…¨æ²¡æœ‰ç”Ÿæ•ˆã€‚</p>

<h4 id="workaround">Workaround</h4>

<p>é‚£ä¹ˆï¼Œè¿™ä¹ˆè§£å†³å‘¢ï¼Ÿåœ¨ context ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®ä¸€ä¸ª JarScannerï¼Œè¿™ä¸ª JarScanner ä¼šè¢«ç”¨æ¥æ‰«æ Jar åŒ…ä¸­çš„ tld æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é»˜è®¤çš„ context.xml ä¸­é…ç½®ä¸€ä¸ªç©ºçš„ JarScannerï¼Œåƒä¸‹é¢è¿™æ ·ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class=""><span class="line">&lt;?xml version='1.0' encoding='utf-8'?&gt;
</span><span class="line">&lt;Context processTlds="false"&gt;
</span><span class="line">    &lt;JarScanner className="com.alipay.sofa.runtime.test.patch.tomcat.NullJarScanner"/&gt;
</span><span class="line">&lt;/Context&gt;</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>NullJarScanner çš„ä»£ç å¦‚ä¸‹ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class=""><span class="line">package com.alipay.sofa.runtime.test.patch.tomcat;
</span><span class="line">
</span><span class="line">import org.apache.tomcat.JarScanner;
</span><span class="line">import org.apache.tomcat.JarScannerCallback;
</span><span class="line">
</span><span class="line">import javax.servlet.ServletContext;
</span><span class="line">import java.util.Set;
</span><span class="line">
</span><span class="line">/**
</span><span class="line"> * @author khotyn 14-1-21 ä¸‹åˆ4:37
</span><span class="line"> */
</span><span class="line">public class NullJarScanner implements JarScanner {
</span><span class="line">    @Override
</span><span class="line">    public void scan(ServletContext context, ClassLoader classloader, JarScannerCallback callback, Set&lt;String&gt; jarsToSkip) {
</span><span class="line">        // Do nothing at all.
</span><span class="line">    }
</span><span class="line">}
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTomcat 7 ä¸ä¼šå‡ºç°ä¸Šè¿°çš„é—®é¢˜ï¼Œä½ åªè¦åœ¨é…ç½®ä¸­æŠŠ processTlds è®¾ç½®æˆ false å³å¯ã€‚</strong></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2014/01/19/java-8-default-method/">Java 8 ä¹‹ Default Method</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-19T22:13:00-06:00" pubdate data-updated="true">Jan 19<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/01/19/java-8-default-method/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>å¦‚æœè¿›åº¦æ­£å¸¸ï¼Œæ–°ç‰ˆæœ¬çš„ Javaï¼ŒJava 8 å°†åœ¨ä¸‰æœˆä»½å‘å¸ƒï¼ŒJava å¼€å‘äººå‘˜æœŸå¾…å·²ä¹…çš„ lambda ä¹Ÿå°†åœ¨ Java 8 ä¸­å¾—åˆ°æ”¯æŒã€‚ç›®å‰ï¼ŒJava 8 çš„æ—©æœŸç‰ˆæœ¬å·²ç»å¯ä»¥åœ¨ Java çš„ç½‘ç«™ä¸Šä¸‹è½½åˆ°äº†ï¼ŒIntellij IDEA ä¹Ÿå·²ç»åœ¨å…¶æœ€æ–°çš„ç‰ˆæœ¬æ”¯æŒäº† Java 8ã€‚æ‰€ä»¥ï¼Œæœ€è¿‘èŠ±äº†ç‚¹æ—¶é—´äº†è§£äº†ä¸€ä¸‹ Java 8 ä¸­æ–°å¢åŠ çš„ä¸€äº›ç‰¹æ€§ã€‚</p>

<p>ç”±äº lambda çš„å¼•å…¥ï¼ŒJava 8 å¯¹åŸæ¥çš„é›†åˆç±»åšäº†å¤§å¹…çš„æ›´æ–°ï¼Œè®©é›†åˆæ“ä½œå¯ä»¥æ”¯æŒ lambda è¡¨è¾¾å¼ã€‚åœ¨çœ‹æ–°çš„çš„é›†åˆç±»çš„ä»£ç çš„æ—¶å€™ï¼Œå‘ç°äº† java 8 ä¼¼ä¹å¢åŠ äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•æè¿°ç¬¦ï¼Œæ¯”å¦‚åœ¨ <code>java.lang.Iterable</code> é‡Œé¢å°±æ–°åŠ å…¥äº†ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="k">default</span> <span class="kt">void</span> <span class="nf">forEach</span><span class="o">(</span><span class="n">Consumer</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">action</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">    <span class="n">Objects</span><span class="o">.</span><span class="na">requireNonNull</span><span class="o">(</span><span class="n">action</span><span class="o">);</span>
</span><span class="line">    <span class="k">for</span> <span class="o">(</span><span class="n">T</span> <span class="n">t</span> <span class="o">:</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">        <span class="n">action</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">t</span><span class="o">);</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>åœ¨æ–¹æ³•çš„æœ€å‰é¢ï¼Œæ˜¯ä¸€ä¸ª <code>default</code> æè¿°ç¬¦ã€‚ç­‰ç­‰ï¼ŒIterable ä¸æ˜¯ä¸ªæ¥å£å—ï¼Œæ€ä¹ˆæœ‰å…·ä½“çš„å®ç°ä»£ç äº†ï¼Ÿ</p>

<p>è¿™ä¸ª default å°±æ˜¯åœ¨ java 8 ä¸­æ–°å¼•å…¥çš„ï¼Œå®ƒå¯ä»¥è®©ä½ çš„æ¥å£æœ‰ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œæ¥å£çš„å®ç°ç±»å¯ä»¥ä¸ç”¨å»å®ç° default methodï¼Œæ¯”å¦‚ï¼Œä¸‹é¢è¿™æ®µä»£ç ï¼Œæ˜¯å¯ä»¥æ­£å¸¸ç¼–è¯‘é€šè¿‡çš„ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kd">class</span> <span class="nc">Impl</span> <span class="kd">implements</span> <span class="n">A</span> <span class="o">{</span>
</span><span class="line">
</span><span class="line"><span class="o">}</span>
</span><span class="line">
</span><span class="line"><span class="kd">interface</span> <span class="nc">A</span> <span class="o">{</span>
</span><span class="line">    <span class="k">default</span> <span class="n">String</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">        <span class="k">return</span> <span class="s">&quot;A&quot;</span><span class="o">;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>å¼•å…¥ default çš„å¸¦æ¥çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯åœ¨ç°æœ‰çš„æ¥å£ä¸Šå¢åŠ æ–¹æ³•è€Œä¸ç”¨è®©å…¶å®ç°ä¿®æ”¹ä»£ç ï¼Œé€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒJava 8 å¯ä»¥é€šè¿‡å¹³æ»‘çš„æ–¹å¼åœ¨åŸæœ‰çš„ Java çš„ API ä¸Šå¼•å…¥ lambda çš„æ”¯æŒã€‚</p>

<p>é‚£ä¹ˆï¼Œå¦‚æœä¸€ä¸ªç±»å®ç°äº†ä¸¤ä¸ªæ¥å£ï¼Œè¿™ä¸¤ä¸ªæ¥å£é‡Œé¢æœ‰æ–¹æ³•ç­¾åç›¸åŒçš„ default methodï¼Œé‚£è¿è¡Œçš„æ—¶å€™åˆ°åº•ä¼šé€‰æ‹©å“ªä¸€ä¸ªï¼Ÿç­”æ¡ˆæ˜¯ç¼–è¯‘ä¸é€šè¿‡ï¼Œå¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œå®ç°ç±»å¿…é¡»å®ç° default methodï¼Œä»¥æ¶ˆé™¤æ­§ä¹‰ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ã€‚</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kd">class</span> <span class="nc">MultiImpl</span> <span class="kd">implements</span> <span class="n">A</span><span class="o">,</span> <span class="n">B</span> <span class="o">{</span>
</span><span class="line">
</span><span class="line">    <span class="cm">/**</span>
</span><span class="line"><span class="cm">     * ç”±äº Aï¼ŒB ä¸­éƒ½æœ‰ String foo() æ¥å£ï¼Œä¸çŸ¥é“è¦è°ƒç”¨å“ªä¸ªï¼Œæ‰€ä»¥å®ç°ç±»å¿…é¡»å®ç°ä¸€ä¸‹</span>
</span><span class="line"><span class="cm">     *</span>
</span><span class="line"><span class="cm">     * @return</span>
</span><span class="line"><span class="cm">     */</span>
</span><span class="line">    <span class="nd">@Override</span>
</span><span class="line">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">        <span class="k">return</span> <span class="s">&quot;C&quot;</span><span class="o">;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span><span class="line">
</span><span class="line"><span class="kd">interface</span> <span class="nc">A</span> <span class="o">{</span>
</span><span class="line">    <span class="k">default</span> <span class="n">String</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">        <span class="k">return</span> <span class="s">&quot;A&quot;</span><span class="o">;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span><span class="line">
</span><span class="line"><span class="kd">interface</span> <span class="nc">B</span> <span class="o">{</span>
</span><span class="line">    <span class="k">default</span> <span class="n">String</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">        <span class="k">return</span> <span class="s">&quot;B&quot;</span><span class="o">;</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>å½“ç„¶ï¼Œåœ¨çš„å®ç°ç±»ä¸­ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨æŸä¸ªæ¥å£çš„ default methodï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kd">class</span> <span class="nc">MultiImplInvokeSuper</span> <span class="kd">implements</span> <span class="n">A</span><span class="o">,</span> <span class="n">B</span> <span class="o">{</span>
</span><span class="line">    <span class="nd">@Override</span>
</span><span class="line">    <span class="kd">public</span> <span class="n">String</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">        <span class="k">return</span> <span class="n">B</span><span class="o">.</span><span class="na">super</span><span class="o">.</span><span class="na">foo</span><span class="o">();</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2014/01/01/sell-mac-book-pro/">è½¬è®©è‡ªç”¨ 13 å¯¸ MacBook Pro</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-01T11:02:00-06:00" pubdate data-updated="true">Jan 1<span>st</span>, 2014</time>
        
         | <a href="/blog/2014/01/01/sell-mac-book-pro/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>å·²ç»å‡ºå”®ï¼Œè°¢è°¢</strong></p>

<p>è½¬è®©è‡ªç”¨çš„ 13 å¯¸ MacBook Proï¼Œ2009 å¹´å¹´ä¸­çš„æ¬¾ï¼Œå‹å· MB990ï¼Œå…¥æ‰‹æ—¶é—´ 2010 å¹´åˆï¼Œä½¿ç”¨æ—¶é—´ä¸‰å¹´ä¸åˆ°ï¼Œé™¤äº†ç”µæ± çš„ç»­èˆªèƒ½åŠ›æœ‰æ‰€ä¸‹é™ï¼Œå…¶ä»–æ²¡æœ‰å‡ºç°ä»»ä½•é—®é¢˜ï¼Œå†…å­˜æˆ‘è‡ªå·±å‡çº§åˆ°äº† 8 Gï¼Œå¹³æ—¶çš„å¼€å‘ä¹Ÿéƒ½æ˜¯ç”¨è¿™å°å¼€å‘ï¼ˆä½ çŸ¥é“å¼€ä¸ª Eclipse æˆ–è€… Intellij IDEA æ˜¯å¾ˆè€—èµ„æºçš„ï¼‰ï¼Œä¹Ÿæ¯”è¾ƒé¡ºç•…ï¼Œ<strong>ä»·æ ¼æ–¹é¢æ˜¯ 2500</strong>ï¼Œå½“ç„¶å¯åˆ€~ï¼Œæš‚æ—¶åªæ¥å—æ­å·çš„å½“é¢äº¤æ˜“ã€‚</p>

<p>æœ‰æ„å‘çš„å¯ä»¥ç›´æ¥åœ¨è¿™ç¯‡åšå®¢ä¸‹é¢å›å¤ï¼Œæˆ–è€…ç»™æˆ‘å‘é‚®ä»¶è”ç³»æˆ‘ï¼Œhting1#gmail.com</p>

<p>å…³äºè¿™ä¸ªå‹å·çš„ MBP çš„å…¶ä»–å‚æ•°ï¼Œå¯ä»¥ç›´æ¥çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼š</p>

<p><img src="https://pic.yupoo.com/khotyn/DqBJdz79/medish.jpg" alt="image" /></p>

<p>ä¸Šå‡ å¼ æœ¬æœ¬çš„ç…§ç‰‡ï¼š</p>

<p>åˆä¸Šåï¼Œæœ‰äº›è®¸åˆ’ç—•</p>

<p><img src="https://pic.yupoo.com/khotyn/DqBPAi4B/medish.jpg" alt="image" /></p>

<p><img src="https://pic.yupoo.com/khotyn/DqBQFoio/medish.jpg" alt="image" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/12/07/google-guava-eventbus/">Google Guava ä¹‹ EventBus</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-07T19:49:00-06:00" pubdate data-updated="true">Dec 7<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/07/google-guava-eventbus/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Google çš„ Guava åº“æ˜¯ä¸€ä¸ª Java ç¨‹åºå‘˜å¿…é¡»äº†è§£çš„åº“ï¼Œå®ƒæä¾›äº†ä¸€äº›éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å‡½æ•°å¼é£æ ¼çš„é›†åˆæ“ä½œï¼ŒCache Builder ç­‰ç­‰çš„åŠŸèƒ½ï¼Œå¦å¤– Google Guava è¿˜æä¾›äº†ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ï¼šEventBusã€‚è¿™ç¯‡æ–‡ç« å°±æ¥ä»‹ç»ä¸€ä¸‹ EventBus çš„ä½¿ç”¨ã€‚</p>

<h3 id="eventbus-">EventBus å¯¹è±¡</h3>

<p>åœ¨ä¸¾ä¾‹è¯´æ˜ EventBus çš„ä½¿ç”¨æ–¹å¼ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ EventBus å¯¹è±¡ï¼ŒEventBus å¯¹è±¡æ•´ä¸ªè´Ÿè´£äº†è§‚å¯Ÿè€…æ¨¡å¼ç›‘å¬è€…çš„æ³¨å†Œï¼Œäº‹ä»¶çš„åˆ†å‘ï¼Œæ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ EventBus çš„æ—¶å€™ï¼Œä½ å°±çœå»äº†éå¸¸å¤šçš„å·¥ä½œï¼Œä½ åªè¦å»ä½¿ç”¨ EventBus å°±å¯ä»¥äº†ï¼Œä¸ç”¨å†å»è‡ªå·±å®ç°ä¸€ä¸ª Publisher çš„ç±»ï¼Œä½¿ç”¨ EventBus çš„ç¬¬ä¸€æ­¥å°±æ˜¯ä½ éœ€è¦ä¸€ä¸ª EventBus çš„å®ä¾‹ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">EventBus</span> <span class="n">eventBus</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EventBus</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="section">æ³¨å†Œç›‘å¬è€…</h3>

<p>ä½¿ç”¨ EventBus ç›‘å¬äº‹ä»¶ï¼Œåªéœ€è¦åœ¨ä½ çš„å¤„ç†äº‹ä»¶çš„æ–¹æ³•ä¸Šæ·»åŠ ä¸€ä¸ª <code>@Subscribe</code> æ³¨è§£å°±å¯ä»¥ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kd">static</span> <span class="kd">class</span> <span class="nc">Subscriber</span> <span class="o">{</span>
</span><span class="line">    <span class="nd">@Subscribe</span>
</span><span class="line">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">subscribe</span><span class="o">(</span><span class="n">Event</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">getWord</span><span class="o">());</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>è¿™é‡Œçš„äº‹ä»¶å¯¹è±¡ <code>Event</code> å¯ä»¥æ˜¯ä»»ä½•çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ <code>Object</code>ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ˜¯ä»»ä½•ä½ è‡ªå®šä¹‰çš„æ¶ˆæ¯å¯¹è±¡ã€‚</p>

<p>å»ºç«‹ä¸€ä¸ªç±»ä»¥åï¼Œå°±å¯ä»¥å¾€ EventBus ä¸­æ³¨å†Œ Subscriberï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">eventBus</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="k">new</span> <span class="n">Subscriber</span><span class="o">());</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="section-1">åˆ†å‘äº‹ä»¶</h3>

<p>åœ¨æ³¨å†Œå®Œäº‹ä»¶åï¼Œå°±å¯ä»¥å»åˆ†å‘äº‹ä»¶äº†ï¼Œåˆ†å‘çš„ä»£ç éå¸¸ç®€å•ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">eventBus</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="k">new</span> <span class="n">Event</span><span class="o">(</span><span class="s">&quot;Hello world&quot;</span><span class="o">));</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>è¿™æ ·ï¼Œæ‰€æœ‰çš„æ³¨å†Œåœ¨ EventBus ä¸­çš„ç›‘å¬è€…ï¼Œåªè¦å®ƒçš„ç›‘å¬æ–¹æ³•çš„å‚æ•°æ˜¯ <code>Event</code> æˆ–è€… <code>Event</code> çš„è¶…ç±»ï¼Œé‚£ä¹ˆéƒ½ä¼šæ”¶åˆ°äº‹ä»¶ã€‚</p>

<h3 id="section-2">ç»“è®º</h3>

<p>EventBus ä½œä¸ºä¸€ä¸ª In-JVM çš„è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ï¼Œéå¸¸ä½¿ç”¨ï¼Œä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œå¯ä»¥å‡å°‘ä¸å°‘çš„å·¥ä½œï¼Œå»ºè®®åœ¨é¡¹ç›®ä¸­å¯ä»¥å¤šå¤šä½¿ç”¨ã€‚</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/11/06/abreact-pleasant/">å‘æ³„å¿«æ„Ÿ</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-06T19:16:00-06:00" pubdate data-updated="true">Nov 6<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/11/06/abreact-pleasant/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>å‰ä¸€æ®µæ—¶é—´ç‰¹åˆ«å–œæ¬¢ä¸ŠçŸ¥ä¹ï¼Œè§‰å¾—è¿˜æ˜¯ä¸€ä¸ªæŒºæœ‰æ„æ€çš„ç½‘ç«™ï¼ŒåŒç±»çš„å›½å¤–ç½‘ç«™æœ‰ Quoraï¼Œä¸è¿‡æˆ‘è‹±è¯­ä¸å¤ªå¥½ï¼Œæ‰€ä»¥å¹³æ—¶è¿˜æ˜¯å–œæ¬¢é€›é€›çŸ¥ä¹ï¼Œä½†æ˜¯æœ€è¿‘é€›çŸ¥ä¹çš„æ—¶å€™å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œé‡Œé¢çš„æœ‰ä¸€äº›çš„é—®é¢˜çš„é«˜ç¥¨ç­”æ¡ˆå…¶å®ä¸æ˜¯åœ¨å›ç­”é—®é¢˜ï¼Œè€Œæ˜¯åœ¨å‘æ³„è‡ªå·±çš„æƒ…æ„Ÿï¼Œè€Œè¿™äº›ç­”æ¡ˆå¾€å¾€è¿˜èƒ½å¤Ÿå¾—åˆ°é«˜ç¥¨ï¼ˆå†å²ä¸Šçš„ç…½åŠ¨å®¶å¤§æ¦‚ä¹Ÿæ˜¯è¿™æ ·çš„ï¼Œè®©è‡ªå·±çš„è¯è¿åˆå¤§ä¼—çš„æƒ…æ„Ÿï¼Œä»¥æ­¤å¾—åˆ°ä»–ä»¬çš„æ”¯æŒï¼‰ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªï¼š</p>

<p><img src="https://pic.yupoo.com/khotyn/Di8YyMye/medish.jpg" alt="image" /></p>

<p>æ­£å¸¸çš„ç­”æ¡ˆåº”è¯¥æ˜¯åˆ—å‡ºé‚¹å­Ÿç¿çš„ç»å†ï¼Œä½†æ˜¯å¾—ç¥¨ç¬¬ä¸€çš„å›ç­”å…¶å®æ˜¯åœ¨è¡¨è¾¾è‡ªå·±å¯¹ã€Œæ¥å¾€ã€è¿™ä¸ªäº§å“çš„ä¸æ»¡ï¼Œæˆ–è€…æ˜¯è§‰å¾—ã€Œæ¥å¾€ã€å¹¶æ²¡æœ‰ä»€ä¹ˆæœªæ¥ï¼Œå½“ç„¶ï¼Œä»–è‡ªå·±ä¼¼ä¹ä¹Ÿæœ‰ç‚¹ä¸å¥½æ„æ€ï¼Œæ‰€ä»¥ç”¨äº†ã€ŒåŒ¿åã€æ¥å›ç­”ã€‚</p>

<p>çŸ¥ä¹ä¸Šçš„è¿™ç§ç­”æ¡ˆä¸æ­¢è¿™é‡Œä¸€ä¸ªï¼Œè¿˜æœ‰å¾ˆå¤šè®¨å·§çš„ç­”æ¡ˆï¼Œä½œä¸ºä¸€ä¸ªé—®ç­”ç½‘ç«™ï¼Œå…¶ç”¨æˆ·å¯¹äºé—®é¢˜çš„å›ç­”åº”è¯¥å°½é‡ä¿æŒä¸­ç«‹ï¼Œè¿™æ ·çš„ç­”æ¡ˆæ¯«æ— ç–‘é—®æ˜¯æ— å¼‚äºç½‘ç«™çš„å½¢è±¡ï¼Œæ‰€ä»¥ç°åœ¨çŸ¥ä¹å¯¹æˆ‘çš„å¸å¼•åŠ›ä¹Ÿè¶Šæ¥è¶Šå°‘äº†ã€‚</p>

<p>æ—¢ç„¶æåˆ°äº†å¿«æ„Ÿï¼Œé¡ºä¾¿è¯´ä¸€å¥ï¼šâ€œé˜…è¯»æ–°é—»ä¹Ÿæ˜¯ä¸€ç§å¿«æ„Ÿâ€ï¼Œè¿™æ˜¯æµªè´¹æ—¶é—´çš„å¿«æ„Ÿï¼Œä¸çœ‹æ–°é—»ï¼Œä½ ä¹Ÿä¸ä¼šé”™è¿‡ä»»ä½•é‡è¦çš„æ¶ˆæ¯ï¼Œæ‰€ä»¥ï¼Œä¸å¦‚æŠŠæ‰‹æœºä¸Šçš„æ–°é—»å®¢æˆ·ç«¯ç»™åˆ æ‰ï¼Œå®ƒä¸èƒ½ç»™ä½ å¸¦æ¥ä»»ä½•ä¸œè¥¿ã€‚</p>

<p>å“¦ï¼Œå¯¹äº†ï¼Œæœ‰ä¸€ä¸ªæ–°é—»å®¢æˆ·ç«¯ï¼Œç´ ä»¥è¯„è®ºè§é•¿ï¼Œå®ƒæä¾›äº†å¦ä¸€ç§å½¢å¼çš„å¿«æ„Ÿå‘æ³„ï¼Œæ˜¯çš„ï¼Œæˆ‘è¯´çš„å°±æ˜¯ã€Œç½‘æ˜“æ–°é—»ã€ã€‚</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/11/02/jvmtop-impl/">Jvmtop ä»‹ç»å’Œå®ç°åˆ†æ</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-02T15:36:00-05:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013/11/02/jvmtop-impl/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3 id="section">ç®€ä»‹</h3>

<p>jvmtop æ˜¯ä¸€ä¸ªåˆ†æå·¥å…·ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªé’ˆå¯¹ jvm çš„ å·¥å…·ï¼Œå±•ç¤ºçš„æ–¹å¼å’Œ unix çš„ top å‘½ä»¤ç›¸ä¼¼ã€‚</p>

<p>jvmtop çš„é¡¹ç›®åœ°å€æ˜¯ï¼š<a href="https://code.google.com/p/jvmtop/">jvmtop</a>ï¼Œå®‰è£… jvmtop é™¤äº†é¡¹ç›®åœ°å€ä¸Šçš„æ–¹å¼ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ jenv å®‰è£…ï¼š<code>jenv install jvmtop</code>ã€‚</p>

<p>jvmtop æä¾›äº†ä¸¤ä¸ªè§†å›¾ï¼Œä¸€ä¸ªæ˜¯æ¦‚è§ˆè§†å›¾ï¼Œå¯ä»¥å±•ç¤ºå‡ºå½“å‰æœºå™¨çš„æ‰€æœ‰çš„ JVM çš„æƒ…å†µï¼Œå‘½ä»¤æ˜¯ </p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">jvmtop.sh</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>æ˜¾ç¤ºå‡ºçš„ä¿¡æ¯ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š</p>

<p><img src="https://pic.yupoo.com/khotyn/DhvVumOY/medish.jpg" alt="image" /></p>

<p>å…¶ä¸­ï¼Œå„ä¸ªå­—æ®µçš„æ„ä¹‰åˆ†åˆ«å¦‚ä¸‹ï¼š</p>

<ul>
  <li>PIDï¼šè¿›ç¨‹ ID</li>
  <li>MAIN-CLASSï¼šmain ç±»çš„åå­—</li>
  <li>HPCURï¼šå½“å‰è¢«ä½¿ç”¨çš„ heap çš„å¤§å°</li>
  <li>HPMAXï¼šæœ€å¤§å¯ç”¨çš„ heap çš„å¤§å°</li>
  <li>NHCURï¼šå½“å‰è¢«ä½¿ç”¨çš„é heap å¤§å°ï¼ˆæ¯”å¦‚ï¼šperm genï¼‰</li>
  <li>NHMAXï¼šæœ€å¤§å¯ç”¨çš„é heap å¤§å°</li>
  <li>CPUï¼šCPU çš„ä½¿ç”¨æƒ…å†µ</li>
  <li>GCï¼šæ¶ˆè€—åœ¨ GC ä¸Šçš„æ—¶é—´æ¯”ä¾‹</li>
  <li>VMï¼šJVM çš„æä¾›è€…ï¼Œå¤§ç‰ˆæœ¬å·ï¼Œå°ç‰ˆæœ¬å·ï¼Œå›¾ä¸­çš„æ„æ€æ˜¯ Apple æä¾›çš„ JDK 6U51 ç‰ˆæœ¬ã€‚</li>
  <li>USERNAMEï¼šå½“å‰çš„ç”¨æˆ·å</li>
  <li>#Tï¼šçº¿ç¨‹æ•°é‡</li>
  <li>DLï¼šæ˜¯å¦æœ‰ç°æˆå‘ç”Ÿæ­»é”</li>
</ul>

<p>è¿˜æœ‰ä¸€ä¸ªè§†å›¾æ˜¯è¯¦æƒ…è§†å›¾ï¼Œå±•ç¤ºä¸€ä¸ª JVM çš„è¯¦ç»†æƒ…å†µï¼Œä½¿ç”¨çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">jvmtop.sh &lt;pid&gt;</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>æ˜¾ç¤ºçš„ä¿¡æ¯ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š</p>

<p><img src="https://pic.yupoo.com/khotyn/Dhw0sotX/dTwsh.png" alt="image" /></p>

<p>å…¶ä¸­ï¼Œå„ä¸ªå­—æ®µçš„æ„ä¹‰å¦‚ä¸‹ï¼š</p>

<ul>
  <li>TIDï¼šçº¿ç¨‹ ID</li>
  <li>NAMEï¼šçº¿ç¨‹å</li>
  <li>STATEï¼šçº¿ç¨‹çŠ¶æ€</li>
  <li>CPUï¼šçº¿ç¨‹å½“å‰çš„ CPU å ç”¨æƒ…å†µ</li>
  <li>TOTALCPUï¼šä»çº¿ç¨‹è¢«åˆ›å»ºå¼€å§‹æ€»ä½“çš„ CPU å ç”¨æƒ…å†µ</li>
  <li>BLOCKBYï¼šé˜»å¡è¿™ä¸ªçº¿ç¨‹çš„çº¿ç¨‹ ID</li>
</ul>

<p>æ›´åŠ è¯¦ç»†çš„ç”¨æ³•å¤§å®¶å¯ä»¥ç”¨ä¸‹é¢çš„ç”¨ <code>jvmtop.sh -h</code> æ¥æŸ¥çœ‹ã€‚</p>

<h3 id="section-1">å®ç°</h3>

<p>jvmtop çš„å®ç°ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œæ•´ä¸ª jvmtop æ‰ 14 ä¸ªç±»ã€‚</p>

<p><img src="https://pic.yupoo.com/khotyn/DhwgtqPY/IYHUw.png" alt="image" /></p>

<p>å…¶ä¸­ JvmTop.java æ˜¯å…¥å£ç±»ã€‚</p>

<p>jvmtop åœ¨å¯åŠ¨åï¼Œä¼šé¦–å…ˆç”¨ <code>sun.jvmstat.monitor.*</code> ä¸‹é¢çš„ç±»ä»¥åŠ <code>com.sun.tools.attach.VirtualMachine</code> è·å–åˆ°å½“å‰æœºå™¨çš„æ‰€æœ‰çš„ JVMï¼Œç„¶åé€šè¿‡ attachment api å°† <code>management-agent.jar</code> è¿™ä¸ª agent åŠ è½½åˆ°ç›®æ ‡ JVM ä¸Šï¼Œè¿™æ ·ï¼Œé€šè¿‡ JMXï¼Œå°±å¯ä»¥æ‹¿åˆ°å½“å‰çš„ JVM çš„å„ç§ä¿¡æ¯äº†ï¼Œå…·ä½“å„ä¸ªä¿¡æ¯éœ€è¦ç”¨ä»€ä¹ˆæ ·çš„ MBean å»æ‹¿ï¼Œå¤§å®¶å¯ä»¥çœ‹å¯¹åº”çš„æºä»£ç ã€‚</p>

<p>å…¶å®ï¼Œå¦‚æœéœ€è¦ä¸€ä¸ª JVM çš„é™æ€çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼ŒPIDï¼ŒMAIN-CLASSï¼ŒJVM-ARGS ç­‰ç­‰é™æ€ä¿¡æ¯ï¼Œç›´æ¥ç”¨ <code>sun.jvmstat.monitor.*</code> ä¸‹çš„ API å°±å¯ä»¥ï¼Œåªæœ‰éœ€è¦åŠ¨æ€ä¿¡æ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰éœ€è¦é€šè¿‡ attachment api æŠŠ JMX çš„åŠŸèƒ½æ‰“å¼€ï¼Œé€šè¿‡å„ç§ MBean å»è·å–è¿™äº›ä¿¡æ¯ã€‚å¦‚æœåç»­éœ€è¦å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™æ ·çš„æ€è·¯å»åšã€‚</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header class="page-header">
    
      <h1 class="entry-title"><a href="/blog/2013/10/24/brave-new-world/">åœ¨æ›´å¤§çš„ä¸–ç•Œé‡è§æ›´å¥½çš„è‡ªå·±</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-24T08:31:00-05:00" pubdate data-updated="true">Oct 24<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/10/24/brave-new-world/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="https://pic.yupoo.com/khotyn/Dg6bDXhi/Zb6Cy.jpg" alt="image" /></p>

<p>ä»Šå¤©å’Œæœ‹å‹èŠå¤©ï¼Œè¯´èµ·çœ¼è§çš„é—®é¢˜ï¼Œä»¥å‰åœ¨ä¸šåŠ¡å›¢é˜Ÿçš„æ—¶å€™å¤§å®¶éƒ½å¥”ç€ä¸šåŠ¡è€Œå»ï¼Œå®Œæˆä¸šåŠ¡ä¸Šçš„éœ€æ±‚ï¼Œæœ€å¤šäº†è§£ä¸€ä¸‹æ‰€ç”¨åˆ°çš„æ¡†æ¶ï¼Œé²œæœ‰å…³æ³¨ä¸šç•Œçš„å¼€æºè½¯ä»¶çš„åŠ¨æ€ã€‚</p>

<p>è€Œåˆ°äº†ä¸­é—´ä»¶å›¢é˜Ÿï¼Œæ‰€æœ‰äººéƒ½å¾—è§„åˆ’ã€å®æ–½ã€æ¨å¹¿è‡ªå·±çš„äº§å“ï¼Œå¦‚æœåªæ˜¯åšä¸€äº›å¹³åº¸çš„äº‹æƒ…ï¼Œé‚£å®åœ¨å¯¹ä¸èµ·ä½ æ‰€åœ¨çš„å›¢é˜Ÿï¼Œæ‰€ä»¥åªèƒ½ç¡¬ç€å¤´çš®å»èŠ±æ—¶é—´å…³æ³¨ä¸šç•Œçš„å¼€æºè½¯ä»¶çš„åŠ¨æ€ï¼Œæ…¢æ…¢åœ°ï¼Œä¹Ÿå°±å¼€é˜”äº†è‡ªå·±çš„çœ¼è§ï¼Œç¢°åˆ°ä¸€ä¸ªé—®é¢˜ä»¥åï¼Œå‘ç°è¿˜å¯ä»¥ç”¨è¿™æ ·çš„æ–¹æ³•è§£å†³ï¼Œè¿™æ˜¯ä¹‹å‰ä»æ¥æ²¡æœ‰æƒ³åˆ°çš„ã€‚</p>

<p>æœ€è¿‘å…¶å®ä¸€ç›´åœ¨åæ€ï¼Œå½“æ—¶è¿™ä¹ˆå¿«ä¸‹å†³å®šè½¬å²—åˆ°ç°åœ¨çš„éƒ¨é—¨åˆ°åº•å¯¹ä¸å¯¹ï¼Ÿè¯šç„¶ï¼Œå½“æ—¶è½¬å²—çš„å†³å®šï¼Œæœ‰å…¶ä»–çš„éå¸¸ç§äººçš„è€ƒè™‘ï¼Œåœ¨æ–°çš„å²—ä½ï¼Œå„ç§ä¸ä¹ æƒ¯ï¼Œä½†æ˜¯è¿™é‡Œæœ‰å¾ˆå¤šæ–°é²œçš„äº‹æƒ…ï¼Œå¯ä»¥ä½œä¸ºå­¦ä¹ çš„å¯¹è±¡ï¼›æœ‰ä¸€äº›å¾ˆå¼ºçš„äººï¼Œå¯ä»¥ä½œä¸ºå­¦ä¹ çš„æ¦œæ ·ã€‚å½“ä½ è¿›å…¥äº†ä¸€ä¸ªæ›´å¤§çš„ä¸–ç•Œï¼Œä½ åˆé‡æ–°å›åˆ°äº†å©´å„¿çš„æ—¶ä»£ï¼Œç–¯ç‹‚å¿«é€Ÿåœ°å¸æ”¶ç€å‘¨å›´çš„ä¸€åˆ‡ã€‚</p>

<p>æ™šä¸Šè·‘æ­¥çš„æ—¶å€™çªç„¶æƒ³èµ·äº† Clyde ä¸‰å¹´å‰å’Œæˆ‘è¯´çš„ä»–çš„æ¢¦æƒ³ï¼šâ€œç­‰æˆ‘è€äº†çš„æ—¶å€™ï¼Œæˆ‘å¸Œæœ›æˆä¸ºä¸€ä¸ªè®²æ•…äº‹çš„äººâ€ï¼Œå½“æ—¶æˆ‘å¹¶ä¸æ˜ç™½ä»–åˆ°åº•æƒ³è¡¨è¾¾ä»€ä¹ˆï¼Œåªèƒ½éšä¾¿åº”ä»˜å‡ å¥ã€‚ç°åœ¨ï¼Œæˆ‘ä¼¼ä¹æœ‰ç‚¹æƒ³æ˜ç™½äº†ï¼Œé‚£äº›æœ‰ç€å¾ˆå¤šç²¾å½©çš„æ•…äº‹çš„äººï¼Œæ— éå°±æ˜¯æ—…è¡Œå®¶ï¼Œèˆ¹å‘˜ä¹‹ç±»çš„ï¼Œæƒ³è¦æˆä¸ºä¸€ä¸ªè®²æ•…äº‹çš„äººï¼Œå¿…é¡»æœ‰è¶³å¤Ÿçš„äººç”Ÿç»å†ï¼Œå’Œè¿™ä¸ªä¸–ç•Œæœ‰æ›´å¤§çš„äº¤é›†ã€‚æœ€è¿‘åœ¨çœ‹å¾·ç”°ç§‹å£°çš„ã€Œéœ‰ã€ï¼Œæ°¸è¿œå¾…åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œç”Ÿæ´»å¤§æ¦‚å°±åƒã€Œéœ‰ã€ä¸­çš„ç”·å¥³ä¸»äººå…¬è¿‡çš„é‚£æ ·ï¼Œå¹³æ·¡ï¼Œçƒ¦èºï¼Œå¶å°”æœ‰ç‚¹é˜³å…‰ï¼Œèƒ½å¤Ÿè®²è¿°çš„å¤§æ¦‚ä¹Ÿå°±æ˜¯äº›å¹³æ·¡æ— å¥‡çš„æ•…äº‹ã€‚</p>

<p>ä¸€ç›´å¾ˆä½©æœèº«è¾¹çš„ä¸€äº›æœ‹å‹å’ŒåŒäº‹ï¼Œä»–ä»¬èƒ½å¤ŸæŠŠä¸€ä»¶äº‹æƒ…åšæŒä¸¤ä¸‰å¹´ï¼Œæœ‰äº›äººè·‘åœ°å¹¶ä¸å¿«ï¼Œä½†æ˜¯ä»–ä»¬æ€»èƒ½æ¯”ä½ æ›´åŠ åšæŒï¼Œè·‘å¾—æ›´è¿œï¼Œå’Œä»–ä»¬ç›¸æ¯”ï¼Œæˆ‘çš„ç”Ÿæ´»æ˜¯ä¸æ˜¯å¤ªè¿‡è‚¤æµ…ï¼Œä¼¼ä¹ä»æ¥æ²¡æœ‰åšæŒä¸€ä»¶äº‹æƒ…è¶…è¿‡ä¸€å¹´ï¼Œå¯¹äºé‚£ä¸ªè¶…è¿‡ä¸€å¹´çš„ä¸–ç•Œï¼Œæˆ‘é™Œç”Ÿæ— æ¯”ï¼Œè¿™å¤§æ¦‚æ˜¯å› ä¸ºæˆ‘ä¸€ç›´éƒ½æ¯”è¾ƒç¼ºä¹æ„å¿—åŠ›å’Œä¸“æ³¨åŠ›ã€‚</p>

<p>æ—§ä¸–ç•Œçºµç„¶èˆ’é€‚æ— æ¯”ï¼Œä½†æ˜¯å‰æ–¹æ°¸è¿œæœ‰ä¸€ä¸ªæ›´å¸å¼•äººï¼Œæ›´å®½å¹¿ï¼Œæ›´æ·±é‚ƒçš„ä¸–ç•Œï¼Œå¤šå¹´ä»¥åï¼Œå¸Œæœ›åœ¨é‚£ä¸ªä¸–ç•Œé‡è§æ›´å¥½çš„è‡ªå·±ã€‚</p>
</div>
  
  


    </article>
  
  <ul class="pager">
    
    <li class="previous"><a href="/blog/page/3/">&larr; Older</a></li>
    
    <li><a href="/blog/archives">Blog Archives</a></li>
    
    <li class="next"><a href="/">Newer &rarr;</a></li>
    
  </ul>
</div>
<aside class="sidebar-nav span3">
  
    <section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Recent Posts</li>
    
      <li class="post">
        <a href="/blog/2019/10/06/the-legend-of-heroes-4/">é—ªä¹‹è½¨è¿¹ 4 ç©åæ„Ÿ</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/03/24/springboot-on-kubernetes/">SpringBoot on Kubernetes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/03/21/app-cds/">Java 10 æ–°ç‰¹æ€§ä¹‹ AppCDS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/02/19/cloud-native-infrastrcuture/">Cloud Native Infrastrcuture é˜…è¯»ç¬”è®°</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/02/18/bring-up-baby/">ã€Œæ³•å›½å¦ˆå¦ˆè‚²å„¿ç»ã€é˜…è¯»ç¬”è®°</a>
      </li>
    
  </ul>
</section>

<section class="well">
  <ul id="gh_repos" class="nav">
    <li class="nav-header">GitHub Repos</li>
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/khotyn">@khotyn</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        github.showRepos({
            user: 'khotyn',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/asides/github.js" type="text/javascript"> </script>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  Copyright &copy; 2019 - khotyn -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'khotynblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
