
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Cloud Native Infrastrcuture é˜…è¯»ç¬”è®° - å°å¾„åˆ†å²”çš„èŠ±å›­</title>
  <meta name="author" content="khotyn">

  
  <meta name="description" content="">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://khotyn.github.com/blog/2018/02/19/cloud-native-infrastrcuture">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/syntax/syntax.css" media="screen, projection" rel="stylesheet" type="text/css">
  <style type="text/css">
    body {
      padding-bottom: 40px;
    }
    h1 {
      margin-bottom: 15px;
    }
    img {
      max-width: 100%;
    }
    .sharing, .meta, .pager {
      margin: 20px 0px 20px 0px;
    }
    .page-footer p {
      text-align: center;
    }
  </style>
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="å°å¾„åˆ†å²”çš„èŠ±å›­" type="application/atom+xml">
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-44033767-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><div class="navbar navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">å°å¾„åˆ†å²”çš„èŠ±å›­</a>

      <div class="nav-collapse">
        <ul class="nav">
  <li><a href="/blog/archives">ğŸ—‚å½’æ¡£</a></li>
  <li><a href="/about">ğŸ‘¨å…³äº</a></li>
  <li><a href="/hire">ğŸ‘¨â€ğŸ’»æ‹›è˜</a></li>
  <li><a href="https://github.com/khotyn" target="_blank">æˆ‘çš„ Github</a></li>
</ul>

        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="https://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:blog.khotyn.com" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      
<article class="hentry span9" role="article">

  
  <header class="page-header">
    
      <h1 class="entry-title">Cloud Native Infrastrcuture é˜…è¯»ç¬”è®°</h1>
    
    
      <p class="meta">
        








  


<time datetime="2018-02-19T21:00:00-06:00" pubdate data-updated="true">Feb 19<span>th</span>, 2018</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>è¿™æ˜¯å‡æœŸè¯»çš„ç¬¬äºŒæœ¬ä¹¦ï¼Œä»¥ä¸‹æ˜¯å¯¹æœ¬ä¹¦çš„é˜…è¯»çš„å†…å®¹çš„ä¸€äº›æ€»ç»“ï¼š</p>

<p>å°± Cloud native è¿™ä¸ªè¯æ¥è¯´ï¼Œå·²ç»è¢«å¸‚åœºäººå‘˜åˆ°å¤„åœ¨ç”¨äº†ï¼Œå°±è·Ÿ Microservice ä¸€æ ·ï¼Œå¾ˆéš¾æ¸…æ™°åœ°å»å®šä¹‰åˆ°åº•ä»€ä¹ˆæ˜¯ Cloud nativeã€‚åœ¨æœ¬ä¹¦ä¸­ï¼Œä½œè€…æåˆ°çš„ Cloud native å…¶å®åŒ…å«äº†ä¸¤ä¸ªéƒ¨åˆ†çš„å†…å®¹ï¼Œä¸€ä¸ªæ˜¯ Cloud native çš„åŸºç¡€è®¾æ–½ï¼ˆCloud native infrastructureï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯ Cloud native çš„åº”ç”¨ï¼ˆCloud native applicationï¼‰ã€‚ä½œè€…å¯¹äº Cloud native infrastructure çš„å®šä¹‰æ˜¯ï¼š</p>

<blockquote>
  <p>Cloud native infrastructure is infrastructure that is hidden behind useful abstractions, controlled by APIs, managed by software, and has the purpose of running applications. Running infrastructure with these traits gives rise to a new pattern for managing that infrastructure in a scalable, efficient way.  </p>
</blockquote>

<p>æ‰€è°“çš„ Cloud native çš„åŸºç¡€è®¾æ–½å°±æ˜¯å½“æˆ‘ä»¬çš„åŸºç¡€è®¾æ–½ï¼ˆå¤§é‡çš„ VM/Dockerï¼Œå¤æ‚çš„ç½‘ç»œï¼Œå„ç§å„æ ·çš„å‚¨å­˜ç­‰ç­‰ï¼‰å˜çš„éå¸¸å¤æ‚å’Œåºå¤§çš„æ—¶å€™ï¼Œé€šè¿‡äººåŠ›æ˜¯æ— æ³•é«˜æ•ˆåœ°è¿›è¡Œè¿ç»´çš„ï¼Œåœ¨è¿™æ ·çš„å¤§è§„æ¨¡ä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡åœ°å»é¿å…äººå·¥ä»‹å…¥ï¼Œè€Œæ˜¯éœ€è¦æœ‰ä¸€å¥—è½¯ä»¶æ¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å»ç®¡ç†æˆ‘ä»¬çš„åŸºç¡€è®¾æ–½ï¼Œå¯ä»¥è®©è¿è¡Œåœ¨è¿™å¥—åŸºç¡€è®¾æ–½ä¸Š Cloud  native çš„åº”ç”¨å¯ä»¥éå¸¸æ–¹ä¾¿åœ°è¢«è¿ç»´ï¼Œéƒ¨ç½²ï¼Œç›‘æ§ç­‰ç­‰ã€‚é‚£ä¹ˆæ€ä¹ˆå»è®¾è®¡ç®¡ç† Cloud native çš„åŸºç¡€è®¾æ–½çš„ç³»ç»Ÿå‘¢ï¼Œä½œè€…æåˆ°äº†å‡ ä¸ªç‚¹ï¼Œå…¶ä¸­åŒ…æ‹¬ç³»ç»Ÿçš„è‡ªä¸¾ï¼ŒAPI çš„è®¾è®¡ç­‰ç­‰ï¼Œä½†æ˜¯æˆ‘è§‰å¾—å…¶ä¸­æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ Reconciler Patternï¼Œå…³äºè¿™ä¸ª Patternï¼Œä¹¦ä¸­æåˆ°äº†å››ä¸ªåŸåˆ™ï¼š</p>

<ul>
  <li>Use a data structure for all inputs and outputs.</li>
  <li>Ensure that the data structure is immutable.</li>
  <li>Keep the resource map simple.</li>
  <li>Make the actual state match the expected state.</li>
</ul>

<p>å…¶ä¸­æœ€åä¸€ç‚¹å’Œ Reconciler Pattern çš„å…³ç³»æœ€å¤§ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ Kubernetes ä¸­çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¾€ Kubernetes ä¸­å»æäº¤ä¸€ä¸ª Specï¼Œæ¯”å¦‚è¦æ±‚ä¸€ä¸ªåº”ç”¨çš„å®ä¾‹çš„æ•°é‡åº”è¯¥æ˜¯ 4ï¼Œé‚£ä¹ˆ Kubernetes å°±ä¼šå°½å¯èƒ½åœ°å»ä¿è¯è¿™ä¸ªåº”ç”¨çš„å®ä¾‹çš„æ•°é‡æ˜¯ 4ï¼Œå¦‚æœä¸€ä¸ªå®ä¾‹ Crash äº†ï¼Œå®ƒå°±é©¬ä¸Šæ–°èµ·ä¸€ä¸ªå®ä¾‹ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ Reconciler Patternï¼Œå°½é‡è®©å®é™…çš„çŠ¶æ€å¯ä»¥å’ŒæœŸæœ›çš„çŠ¶æ€åŒ¹é…ä¸Šã€‚</p>

<p>Reconciler Pattern åœ¨è®¾è®¡ä¸Šéå¸¸å¤§çš„ä¸€ä¸ªä¼˜åŠ¿å°±æ˜¯å®ƒæ˜¯å£°æ˜å¼çš„ï¼Œè€Œä¸æ˜¯ååº”å¼çš„ã€‚ç”¨æˆ·è¦åšçš„æ˜¯æŒ‰ç…§ç³»ç»Ÿæä¾›å‡ºçš„ APIï¼Œç›´æ¥å‘Šè¯‰ç³»ç»Ÿä½ æƒ³è¦ä»€ä¹ˆï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘æƒ³è¦ä¸€ä¸ªåº”ç”¨çš„å®ä¾‹çš„æ•°é‡ä¿æŒåœ¨ 4 ä¸ªï¼Œç³»ç»Ÿå°±å»è€ƒè™‘å„ç§æƒ…å†µï¼Œè®©ä½ çš„åº”ç”¨çš„æ•°é‡ä¿æŒåœ¨ 4 ä¸ªã€‚è€Œååº”å¼çš„è¯ï¼Œåˆ™æ˜¯ç›‘å¬ç³»ç»Ÿçš„äº‹ä»¶ï¼Œæ¯”å¦‚ä½ çš„åº”ç”¨çš„æŸä¸ªå®ä¾‹ Crash äº†ï¼Œç„¶åä½ ç›‘å¬åˆ°äº†è¿™ä¸ªäº‹ä»¶ä¹‹åï¼Œå°±è°ƒç”¨ç³»ç»Ÿçš„ API å»æ–°åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚æ˜¾ç„¶ï¼Œå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œå£°æ˜å¼çš„æ–¹å¼è¦ç®€å•åœ°å¾ˆå¤šï¼Œä¸å®¹æ˜“å‡ºé”™ã€‚è€Œååº”å¼åˆ™è¦æ±‚æ¯ä¸€ä¸ªåº”ç”¨éƒ½å»ç›‘å¬ç³»ç»Ÿçš„äº‹ä»¶ï¼Œä¸ä½†ä¾µå…¥åˆ°äº†åº”ç”¨ï¼Œä¹Ÿå¾ˆå®¹æ˜“å‡ºé”™ã€‚</p>

<p>åœ¨ä¸Šé¢çš„ Reconciler Pattern çš„å››ä¸ªåŸåˆ™ä¸­ï¼Œç¬¬äºŒç‚¹è®©æ•°æ®ç»“æ„æ˜¯ä¸å¯å˜çš„è¿™ä¸€ç‚¹ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œä½†æ˜¯æˆ‘ä¸æ˜¯å¾ˆæ˜ç™½è¿™ä¸ªç‚¹å’Œ Reconciler Pattern å…·ä½“çš„å…³ç³»åœ¨å“ªé‡Œï¼Ÿè¿™ä¸ªåŸåˆ™æ˜¯è¯´å¦‚æœæˆ‘ä»¬è¦ä¿®æ”¹ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¸æ˜¯ä¿®æ”¹å®ƒï¼Œè€Œæ˜¯æ–°å»ºä¸€ä¸ªæ–°çš„ï¼Œç„¶åæŠŠåŸæ¥çš„æ ‡è®°æˆè¿‡æœŸï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¿ç•™æ•°æ®ç»“æ„ä¸­é—´çš„å„ç§ç‰ˆæœ¬ï¼Œå½“éœ€è¦çœ‹ä¸‹å½“å‰çš„ Infra æœ‰å“ªäº›åŒºåˆ«çš„ï¼Œå°±å¯ä»¥æŠŠè¿™äº›ç‰ˆæœ¬ç›´æ¥æ‹¿å‡ºæ¥å¯¹æ¯”ï¼Œéå¸¸æ–¹ä¾¿åœ°å°±å¯ä»¥å›ç­”çº¿ä¸Šç¯å¢ƒåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆæ ·çš„å˜æ›´ã€‚</p>

<p>æœ‰äº† Cloud native çš„åŸºç¡€è®¾æ–½ï¼Œæˆ‘ä»¬è¿˜è¦æœ‰ Cloud native çš„åº”ç”¨è¿è¡Œåœ¨ä¸Šé¢ï¼Œé‚£ä¹ˆä½œä¸ºåŸºç¡€è®¾æ–½ï¼Œæˆ‘ä»¬è¿˜åº”è¯¥ç»™åº”ç”¨åˆ°åº•æä¾›ä»€ä¹ˆæ ·çš„èƒ½åŠ›å‘¢ï¼Œä¹¦ä¸­æåˆ°äº†å…«ç‚¹ï¼š</p>

<ul>
  <li>Runtime and isolationï¼ˆè¿™é‡Œçš„ isolation æ˜¯æŒ‡èµ„æºçš„ isolationï¼Œæ¯”å¦‚ CPUï¼ŒMemoryï¼ŒStorage ç­‰ç­‰ï¼‰</li>
  <li>Resource allocation and scheduling</li>
  <li>Environment isolationï¼ˆè¿™é‡Œçš„ isolation æŒ‡çš„æ˜¯ç¯å¢ƒçš„ isolationï¼Œæ¯”å¦‚ devï¼Œtestï¼Œstagingï¼Œproductï¼‰</li>
  <li>Service discovery</li>
  <li>State managementï¼ˆReadiness, Livenessï¼‰</li>
  <li>Monitoring and logging</li>
  <li>Metrics aggregation</li>
  <li>Debugging and tracing</li>
</ul>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„å…«ä¸ªç‚¹ä¸­å…¶å®ä¸‹é¢éå¸¸å¤šçš„éƒ½æ˜¯åŸæ¥ä¼ ç»Ÿçš„ä¸­é—´ä»¶åœ¨å¹²çš„ä¸€äº›äº‹æƒ…ï¼Œè€Œåœ¨ Cloud native çš„åŸºç¡€è®¾æ–½ä¸­ï¼Œè¿™äº›ä¸­é—´ä»¶æ­£åœ¨å¾€ä¸‹æ²‰ï¼Œç›´æ¥æˆä¸ºåŸºç¡€è®¾æ–½çš„ä¸€éƒ¨åˆ†ï¼Œä¸ºåº”ç”¨æä¾›èƒ½åŠ›ã€‚è€Œä¸”åœ¨ CNCF ä¸­ï¼Œä¸Šé¢çš„å…«ä¸ªç‚¹åŸºæœ¬ä¸Šéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„äº§å“å¯¹åº”ï¼š</p>

<ul>
  <li>Runtime and isolation: containers, rkt</li>
  <li>Resource allocation and scheduling: kubernetes</li>
  <li>Environment isolation: kubernetes</li>
  <li>Service discovery: kubernetes</li>
  <li>State management: kubernetes</li>
  <li>Monitoring and logging: Prometheus, Fluentd</li>
  <li>Metrics aggregation: Prometheus</li>
  <li>Debugging and tracing: OpenTracing, Jaeger</li>
</ul>

<p>é™¤äº†ä¸Šé¢çš„å…«ä¸ªç‚¹ä¹‹å¤–ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºåº”è¯¥è¿˜åŠ ä¸Šä¸€ä¸ªç‚¹ï¼Œå°±æ˜¯ Network Resilientï¼Œè¿™å¯ä»¥æå¤§ç¨‹åº¦åœ°è§£å†³åº”ç”¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡çš„é—®é¢˜ï¼Œè¿™ä¸ªæ­£æ˜¯ Service Mesh æ‰€æä¾›çš„èƒ½åŠ›ï¼Œåœ¨ CNCF é‡Œé¢å¯¹åº”çš„äº§å“æ˜¯ Envoyï¼ˆå¥‡æ€ª istio æ€ä¹ˆè¿˜æ²¡æœ‰è¿›å…¥ CNCFï¼‰ã€‚</p>

<p>æ€»ç»“æ¥è¯´ï¼Œæœ¬ä¹¦çš„ä½œè€…åŸºæœ¬ä¸ŠæŠŠè®¾è®¡ä¸€ä¸ª Cloud native infrastructure æ‰€éœ€è¦åšçš„äº‹æƒ…éƒ½è®²äº†ä¸€éï¼ŒåŒ…æ‹¬ä¸Šé¢æ²¡æœ‰æåˆ°çš„æµ‹è¯•ç­‰ç­‰ï¼Œå¤§éƒ¨åˆ†çš„å†…å®¹å…¶å®å°±æ˜¯ Kubernetes ç›®å‰å·²ç»åšåˆ°çš„ä¸€äº›äº‹æƒ…ï¼Œå¦‚æœä½ å¯¹ Kubernetes çš„è®¾è®¡å·²ç»éå¸¸æ¸…æ¥šäº†ï¼Œé‚£ä¹ˆè¿™æœ¬ä¹¦å¯¹ä½ çš„ä»·å€¼å¯èƒ½ä¸å¤§ï¼Œå¦‚æœå¯¹ Kubernetes çš„è®¾è®¡å¹¶ä¸ç†Ÿæ‚‰ï¼Œé‚£ä¹ˆç›¸ä¿¡ä½ å¯ä»¥ä»è¿™æœ¬ä¹¦é‡Œé¢å­¦åˆ°ä¸å°‘ä¸œè¥¿ã€‚</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">khotyn</span></span>

      








  


<time datetime="2018-02-19T21:00:00-06:00" pubdate data-updated="true">Feb 19<span>th</span>, 2018</time>
      


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    
    <section>
      <h1>Comments</h1>
      <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
    </section>
    
    <ul class="pager">
      
      <li class="previous"><a class="basic-alignment left"
        href="/blog/2018/02/18/bring-up-baby/" title="Previous Post:
        ã€Œæ³•å›½å¦ˆå¦ˆè‚²å„¿ç»ã€é˜…è¯»ç¬”è®°">&laquo; ã€Œæ³•å›½å¦ˆå¦ˆè‚²å„¿ç»ã€é˜…è¯»ç¬”è®°</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
      <li class="next"><a class="basic-alignment right" href="/blog/2018/03/21/app-cds/"
        title="Next Post: Java 10 æ–°ç‰¹æ€§ä¹‹ AppCDS">Java 10 æ–°ç‰¹æ€§ä¹‹ AppCDS
        &raquo;</a></li>
      
    </ul>
  </footer>
</article>

<aside class="sidebar-nav span3">
  
    <section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Recent Posts</li>
    
      <li class="post">
        <a href="/blog/2019/10/08/jdk13-dynamic-cds/">JDK13 æ–°ç‰¹æ€§ä¹‹ Dynamic CDS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/10/06/new-zealand/">æ–°è¥¿å…°æ¸¸è®°</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/10/06/the-legend-of-heroes-4/">é—ªä¹‹è½¨è¿¹ 4 ç©åæ„Ÿ</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/03/24/springboot-on-kubernetes/">SpringBoot on Kubernetes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/03/21/app-cds/">Java 10 æ–°ç‰¹æ€§ä¹‹ AppCDS</a>
      </li>
    
  </ul>
</section>

<section class="well">
  <ul id="gh_repos" class="nav">
    <li class="nav-header">GitHub Repos</li>
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/khotyn">@khotyn</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        github.showRepos({
            user: 'khotyn',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/asides/github.js" type="text/javascript"> </script>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  Copyright &copy; 2019 - khotyn -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'khotynblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://khotyn.github.com/blog/2018/02/19/cloud-native-infrastrcuture/';
        var disqus_url = 'http://khotyn.github.com/blog/2018/02/19/cloud-native-infrastrcuture/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
